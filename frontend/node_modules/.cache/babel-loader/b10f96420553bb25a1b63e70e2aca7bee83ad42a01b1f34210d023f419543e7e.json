{"ast":null,"code":"var _jsxFileName = \"/Users/chrissanga/Desktop/projects/react-routing-practice/frontend/src/components/EventForm.js\",\n  _s = $RefreshSig$();\nimport { useNavigate, Form, useNavigation, useActionData } from 'react-router-dom';\nimport classes from './EventForm.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EventForm({\n  method,\n  event\n}) {\n  _s();\n  // gives us access to the data returned by our action. In this case the data would be the data returned on the backend in case of validation errors, which would be an object with a message and a nested errors object, which has different keys for the different form inputs and includes more detailed error messages\n  const data = useActionData();\n  const navigate = useNavigate();\n  // the useNavigation hook can be used to extract data that was submitted as well as find out what the current state of the currently active transition is when the form is submitted. So in this case we can see if the data submission as already been completed\n  const navigation = useNavigation();\n\n  // if this is true, we know that action that was triggered is currently still active. this allows us to disable the save button to prevent multiple submissions\n  const isSubmitting = navigation.state === 'submitting';\n  function cancelHandler() {\n    navigate('..');\n  }\n\n  // It's important to inlcude at name for each form input.\n  // The Form tag will make sure that the browser default of sending a request to the backend will be omitted but it will take the request that would have been sent and give it to the action\n  return /*#__PURE__*/_jsxDEV(Form, {\n    method: method,\n    className: classes.form,\n    children: [data && data.errors && /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: Object.values(data.errors).map(err => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: err\n      }, err, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 50\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 31\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"title\",\n        children: \"Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"title\",\n        type: \"text\",\n        name: \"title\",\n        required: true,\n        defaultValue: event ? event.title : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"image\",\n        children: \"Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"image\",\n        type: \"url\",\n        name: \"image\",\n        required: true,\n        defaultValue: event ? event.image : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"date\",\n        children: \"Date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"date\",\n        type: \"date\",\n        name: \"date\",\n        required: true,\n        defaultValue: event ? event.date : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: \"Description\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        rows: \"5\",\n        required: true,\n        defaultValue: event ? event.description : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.actions,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: cancelHandler,\n        disabled: isSubmitting,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: isSubmitting,\n        children: isSubmitting ? 'Submitting...' : 'Save'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 5\n  }, this);\n}\n_s(EventForm, \"4RpZWvb1/vq18jUIhqcDrPiPElE=\", false, function () {\n  return [useActionData, useNavigate, useNavigation];\n});\n_c = EventForm;\nexport default EventForm;\nexport async function action({\n  request,\n  params\n}) {\n  const method = request.method;\n  const data = await request.formData();\n  const eventData = {\n    title: data.get('title'),\n    image: data.get('image'),\n    date: data.get('date'),\n    description: data.get('description')\n  };\n  let url = 'http://localhost:8080/events';\n  if (method === 'patch') {\n    const eventId = params.eventId;\n    url;\n  }\n  const response = await fetch(url, {\n    method: method,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(eventData)\n  });\n\n  // will return the resonse from the backend if validation errors were detected\n  if (response.status === 422) {\n    return response;\n  }\n  if (!response.ok) {\n    throw new Response(JSON.stringify({\n      message: 'Could not save event.'\n    }), {\n      status: 500\n    });\n  }\n\n  // allows you to specify a path where you want to redirect the user\n  return redirect('/events');\n}\nvar _c;\n$RefreshReg$(_c, \"EventForm\");","map":{"version":3,"names":["useNavigate","Form","useNavigation","useActionData","classes","jsxDEV","_jsxDEV","EventForm","method","event","_s","data","navigate","navigation","isSubmitting","state","cancelHandler","className","form","children","errors","Object","values","map","err","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","type","name","required","defaultValue","title","image","date","rows","description","actions","onClick","disabled","_c","action","request","params","formData","eventData","get","url","eventId","response","fetch","headers","body","JSON","stringify","status","ok","Response","message","redirect","$RefreshReg$"],"sources":["/Users/chrissanga/Desktop/projects/react-routing-practice/frontend/src/components/EventForm.js"],"sourcesContent":["import { useNavigate, Form, useNavigation, useActionData } from 'react-router-dom';\n\nimport classes from './EventForm.module.css';\n\nfunction EventForm({ method, event }) {\n  // gives us access to the data returned by our action. In this case the data would be the data returned on the backend in case of validation errors, which would be an object with a message and a nested errors object, which has different keys for the different form inputs and includes more detailed error messages\n  const data = useActionData();\n  const navigate = useNavigate();\n  // the useNavigation hook can be used to extract data that was submitted as well as find out what the current state of the currently active transition is when the form is submitted. So in this case we can see if the data submission as already been completed\n  const navigation = useNavigation();\n\n  // if this is true, we know that action that was triggered is currently still active. this allows us to disable the save button to prevent multiple submissions\n  const isSubmitting = navigation.state === 'submitting';\n\n  function cancelHandler() {\n    navigate('..');\n  }\n\n  // It's important to inlcude at name for each form input.\n  // The Form tag will make sure that the browser default of sending a request to the backend will be omitted but it will take the request that would have been sent and give it to the action\n  return (\n    <Form method={method} className={classes.form}>\n      {data && data.errors && <ul>\n          {Object.values(data.errors).map(err => <li key={err}>{err}</li>)}\n        </ul>}\n      <p>\n        <label htmlFor=\"title\">Title</label>\n        <input id=\"title\" type=\"text\" name=\"title\" required defaultValue={event ? event.title : ''} />\n      </p>\n      <p>\n        <label htmlFor=\"image\">Image</label>\n        <input id=\"image\" type=\"url\" name=\"image\" required defaultValue={event ? event.image : ''} />\n      </p>\n      <p>\n        <label htmlFor=\"date\">Date</label>\n        <input id=\"date\" type=\"date\" name=\"date\" required defaultValue={event ? event.date : ''} />\n      </p>\n      <p>\n        <label htmlFor=\"description\">Description</label>\n        <textarea id=\"description\" name=\"description\" rows=\"5\" required defaultValue={event ? event.description : ''} />\n      </p>\n      <div className={classes.actions}>\n        <button type=\"button\" onClick={cancelHandler} disabled={isSubmitting}>\n          Cancel\n        </button>\n        <button disabled={isSubmitting}>{isSubmitting ? 'Submitting...' : 'Save'}</button>\n      </div>\n    </Form>\n  );\n}\n\nexport default EventForm;\n\nexport async function action({request, params}) {\n  const method = request.method;\n  const data = await request.formData();\n\n  const eventData = {\n    title: data.get('title'),\n    image: data.get('image'),\n    date: data.get('date'),\n    description: data.get('description'),\n  }\n\n  let url = 'http://localhost:8080/events';\n\n  if (method === 'patch') {\n    const eventId = params.eventId;\n    url\n  }\n\n  const response = await fetch(url, {\n    method: method,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(eventData)\n  });\n\n  // will return the resonse from the backend if validation errors were detected\n  if (response.status === 422) {\n    return response;\n  }\n\n  if (!response.ok) {\n    throw new Response(JSON.stringify({message: 'Could not save event.'}), { status: 500 });\n  }\n\n  // allows you to specify a path where you want to redirect the user\n  return redirect('/events');\n}"],"mappings":";;AAAA,SAASA,WAAW,EAAEC,IAAI,EAAEC,aAAa,EAAEC,aAAa,QAAQ,kBAAkB;AAElF,OAAOC,OAAO,MAAM,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,SAASC,SAASA,CAAC;EAAEC,MAAM;EAAEC;AAAM,CAAC,EAAE;EAAAC,EAAA;EACpC;EACA,MAAMC,IAAI,GAAGR,aAAa,CAAC,CAAC;EAC5B,MAAMS,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAC9B;EACA,MAAMa,UAAU,GAAGX,aAAa,CAAC,CAAC;;EAElC;EACA,MAAMY,YAAY,GAAGD,UAAU,CAACE,KAAK,KAAK,YAAY;EAEtD,SAASC,aAAaA,CAAA,EAAG;IACvBJ,QAAQ,CAAC,IAAI,CAAC;EAChB;;EAEA;EACA;EACA,oBACEN,OAAA,CAACL,IAAI;IAACO,MAAM,EAAEA,MAAO;IAACS,SAAS,EAAEb,OAAO,CAACc,IAAK;IAAAC,QAAA,GAC3CR,IAAI,IAAIA,IAAI,CAACS,MAAM,iBAAId,OAAA;MAAAa,QAAA,EACnBE,MAAM,CAACC,MAAM,CAACX,IAAI,CAACS,MAAM,CAAC,CAACG,GAAG,CAACC,GAAG,iBAAIlB,OAAA;QAAAa,QAAA,EAAeK;MAAG,GAATA,GAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAW,CAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9D,CAAC,eACPtB,OAAA;MAAAa,QAAA,gBACEb,OAAA;QAAOuB,OAAO,EAAC,OAAO;QAAAV,QAAA,EAAC;MAAK;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACpCtB,OAAA;QAAOwB,EAAE,EAAC,OAAO;QAACC,IAAI,EAAC,MAAM;QAACC,IAAI,EAAC,OAAO;QAACC,QAAQ;QAACC,YAAY,EAAEzB,KAAK,GAAGA,KAAK,CAAC0B,KAAK,GAAG;MAAG;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7F,CAAC,eACJtB,OAAA;MAAAa,QAAA,gBACEb,OAAA;QAAOuB,OAAO,EAAC,OAAO;QAAAV,QAAA,EAAC;MAAK;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACpCtB,OAAA;QAAOwB,EAAE,EAAC,OAAO;QAACC,IAAI,EAAC,KAAK;QAACC,IAAI,EAAC,OAAO;QAACC,QAAQ;QAACC,YAAY,EAAEzB,KAAK,GAAGA,KAAK,CAAC2B,KAAK,GAAG;MAAG;QAAAX,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5F,CAAC,eACJtB,OAAA;MAAAa,QAAA,gBACEb,OAAA;QAAOuB,OAAO,EAAC,MAAM;QAAAV,QAAA,EAAC;MAAI;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAClCtB,OAAA;QAAOwB,EAAE,EAAC,MAAM;QAACC,IAAI,EAAC,MAAM;QAACC,IAAI,EAAC,MAAM;QAACC,QAAQ;QAACC,YAAY,EAAEzB,KAAK,GAAGA,KAAK,CAAC4B,IAAI,GAAG;MAAG;QAAAZ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1F,CAAC,eACJtB,OAAA;MAAAa,QAAA,gBACEb,OAAA;QAAOuB,OAAO,EAAC,aAAa;QAAAV,QAAA,EAAC;MAAW;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAChDtB,OAAA;QAAUwB,EAAE,EAAC,aAAa;QAACE,IAAI,EAAC,aAAa;QAACM,IAAI,EAAC,GAAG;QAACL,QAAQ;QAACC,YAAY,EAAEzB,KAAK,GAAGA,KAAK,CAAC8B,WAAW,GAAG;MAAG;QAAAd,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/G,CAAC,eACJtB,OAAA;MAAKW,SAAS,EAAEb,OAAO,CAACoC,OAAQ;MAAArB,QAAA,gBAC9Bb,OAAA;QAAQyB,IAAI,EAAC,QAAQ;QAACU,OAAO,EAAEzB,aAAc;QAAC0B,QAAQ,EAAE5B,YAAa;QAAAK,QAAA,EAAC;MAEtE;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTtB,OAAA;QAAQoC,QAAQ,EAAE5B,YAAa;QAAAK,QAAA,EAAEL,YAAY,GAAG,eAAe,GAAG;MAAM;QAAAW,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/E,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAEX;AAAClB,EAAA,CA7CQH,SAAS;EAAA,QAEHJ,aAAa,EACTH,WAAW,EAETE,aAAa;AAAA;AAAAyC,EAAA,GALzBpC,SAAS;AA+ClB,eAAeA,SAAS;AAExB,OAAO,eAAeqC,MAAMA,CAAC;EAACC,OAAO;EAAEC;AAAM,CAAC,EAAE;EAC9C,MAAMtC,MAAM,GAAGqC,OAAO,CAACrC,MAAM;EAC7B,MAAMG,IAAI,GAAG,MAAMkC,OAAO,CAACE,QAAQ,CAAC,CAAC;EAErC,MAAMC,SAAS,GAAG;IAChBb,KAAK,EAAExB,IAAI,CAACsC,GAAG,CAAC,OAAO,CAAC;IACxBb,KAAK,EAAEzB,IAAI,CAACsC,GAAG,CAAC,OAAO,CAAC;IACxBZ,IAAI,EAAE1B,IAAI,CAACsC,GAAG,CAAC,MAAM,CAAC;IACtBV,WAAW,EAAE5B,IAAI,CAACsC,GAAG,CAAC,aAAa;EACrC,CAAC;EAED,IAAIC,GAAG,GAAG,8BAA8B;EAExC,IAAI1C,MAAM,KAAK,OAAO,EAAE;IACtB,MAAM2C,OAAO,GAAGL,MAAM,CAACK,OAAO;IAC9BD,GAAG;EACL;EAEA,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAACH,GAAG,EAAE;IAChC1C,MAAM,EAAEA,MAAM;IACd8C,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACT,SAAS;EAChC,CAAC,CAAC;;EAEF;EACA,IAAII,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAE;IAC3B,OAAON,QAAQ;EACjB;EAEA,IAAI,CAACA,QAAQ,CAACO,EAAE,EAAE;IAChB,MAAM,IAAIC,QAAQ,CAACJ,IAAI,CAACC,SAAS,CAAC;MAACI,OAAO,EAAE;IAAuB,CAAC,CAAC,EAAE;MAAEH,MAAM,EAAE;IAAI,CAAC,CAAC;EACzF;;EAEA;EACA,OAAOI,QAAQ,CAAC,SAAS,CAAC;AAC5B;AAAC,IAAAnB,EAAA;AAAAoB,YAAA,CAAApB,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}